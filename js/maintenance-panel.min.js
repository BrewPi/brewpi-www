function refreshLogs(e,t){"use strict";$.get("getLogs.php?stdout="+e.toString()+"&stderr="+t.toString(),function(n){if(t){$("div.stderr").each(function(){var e=$(this)[0];var t=false;if(e.scrollTop-e.scrollHeight<40&&e.scrollTop-e.scrollHeight>-40){t=true}var r=false;if($(this).text().length<40){r=true}if(n.stderr){$(this).html(n.stderr)}else{$(this).html("")}if(t||r){e.scrollTop=e.scrollHeight}})}if(e){$("div.stdout").each(function(){var e=$(this)[0];var t=false;if(e.scrollTop-e.scrollHeight<40&&e.scrollTop-e.scrollHeight>-40){t=true}var r=false;if($(this).text().length<40){r=true}if(n.stdout){$(this).html(n.stdout)}else{$(this).html("")}if(t||r){e.scrollTop=e.scrollHeight}})}})}function startRefreshLogs(e,t,n){"use strict";if(typeof window.refreshLogsInterval!=="undefined"){window.clearInterval(window.refreshLogsInterval)}refreshLogs(t,n);refreshLogsInterval=window.setInterval(function(){refreshLogs(t,n)},e)}function programmingError(e){"use strict";window.alert("Error while programming: "+e)}function programmingDone(){"use strict";$("#program-stderr-header").text("Programming done!")}function programmingFailed(){"use strict";$("#program-stderr-header").text("Something went wrong! Please check the log for details!")}$(document).ready(function(){"use strict";$("#maintenance-panel").dialog({autoOpen:false,title:"Maintenance Panel",height:850,width:1e3}).tabs();$("#maintenance-panel").css("visibility","visible");$("button#maintenance").button({icons:{primary:"ui-icon-newwin"}}).unbind("click").click(function(){$("#maintenance-panel").dialog("open")});$("button#apply-interval").button({icons:{primary:"ui-icon-check"}}).unbind("click").click(function(){$.post("socketmessage.php",{messageType:"interval",message:String($("select#interval").val())})});$("button.apply-profile-name").button({icons:{primary:"ui-icon-check"}}).unbind("click").click(function(){$.post("socketmessage.php",{messageType:"profileName",message:$("input#profile-name").val()})});$("button.apply-datetime-format-display").button({icons:{primary:"ui-icon-check"}}).unbind("click").click(function(){$.post("socketmessage.php",{messageType:"dateTimeFormatDisplay",message:$("#datetime-format-display").val()})});$("#advanced-settings").find(".send-button").button({icons:{primary:"ui-icon-check"}}).unbind("click").click(function(){var e;if($(this).parent().find("select").length){e='{"'+$(this).parent().find("select").attr("name")+'":"'+$(this).parent().find("select").val()+'"}'}else if($(this).parent().find("input").length){e='{"'+$(this).parent().find("input").attr("name")+'":'+$(this).parent().find("input").val()+"}"}else{return}$.post("socketmessage.php",{messageType:"setParameters",message:e});if($(this).parent().find("select").attr("name")==="tempFormat"){reloadControlConstantsFromArduino();reloadControlSettingsFromArduino()}});$(".cc.receive-from-script").button({icons:{primary:"ui-icon-arrowthickstop-1-s"}}).unbind("click").click(receiveControlConstants);$(".cc.update-from-arduino").button({icons:{primary:"ui-icon-refresh"}}).unbind("click").click(reloadControlConstantsFromArduino);$(".cc.load-defaults").button({icons:{primary:"ui-icon-trash"}}).unbind("click").click(loadDefaultControlConstants);$(".cs.receive-from-script").button({icons:{primary:"ui-icon-arrowthickstop-1-s"}}).unbind("click").click(receiveControlSettings);$(".cs.update-from-arduino").button({icons:{primary:"ui-icon-refresh"}}).unbind("click").click(reloadControlSettingsFromArduino);$(".cs.load-defaults").button({icons:{primary:"ui-icon-trash"}}).unbind("click").click(loadDefaultControlSettings);$(".cv.receive-from-script").button({icons:{primary:"ui-icon-arrowthickstop-1-s"}}).unbind("click").click(receiveControlVariables);$(".cv.update-from-arduino").button({icons:{primary:"ui-icon-refresh"}}).unbind("click").click(reloadControlVariablesFromArduino);$("#refresh-logs").button({icons:{primary:"ui-icon-refresh"}}).unbind("click").click(function(){refreshLogs(1,1)});$("button#auto-refresh-logs").button({icons:{primary:"ui-icon-refresh"}}).unbind("click").click(function(){startRefreshLogs(5e3,1,1);if($(this).hasClass("ui-state-default")){$(this).removeClass("ui-state-default").addClass("ui-state-error");$(this).find(".ui-button-text").text("Disable auto-refresh")}else{$(this).removeClass("ui-state-error").addClass("ui-state-default");$(this).find(".ui-button-text").text("Enable auto-refresh")}});$("#erase-logs").button({icons:{primary:"ui-icon-trash"}}).unbind("click").click(function(){$.post("socketmessage.php",{messageType:"eraseLogs",message:""});refreshLogs(1,1)});$("input#program-submit-button").button({icons:{primary:"ui-icon-arrowthickstop-1-n"}}).unbind("click").click(function(){startRefreshLogs(2e3,0,1,"#reprogram-arduino");$("#program-stderr-header").text("Programming... keep an eye on the output below to see the progress.")})});var refreshLogsInterval;$("#maintenance-panel").on("tabsactivate",function(e,t){"use strict";if(typeof window.refreshLogsInterval!=="undefined"){window.clearInterval(window.autoRefreshLogsInterval)}$("button#auto-refresh-logs").removeClass("ui-state-error").addClass("ui-state-default").find(".ui-button-text").text("Enable auto-refresh")})